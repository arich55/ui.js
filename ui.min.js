/**
 * ui.js
 * Author: Andre Richards
 * Simplified user interface jquery library.
 * October, 2012
 *
 * Quickly set up interface buttons with bound dom elements
 * that respond whenever the appropriate action is triggered.
 *
 * Instructions:
 * create a new button element and give it class 'uibutton'.
 * Set the uiaction attribute to 'action function parameter1 parameter 2...'.
 * Create a responder in a javascript block using 
 * ui.responder('#button_id','#responding_element_id').
 */

function ui(){this.actionList=new Array;this.responderList=new Object;ui.prototype.action=function(g,d,c,a){this.selector="#"+g;this.action=d;var b=$(this.selector);var f=c;var e=new Array;if(a!=null){e=ui.args(a)}$("body").on(this.action,this.selector,function(i){var h=window[f](e);ui.respond(g,h)});ui.actionList.push(this)};ui.prototype.responder=function(a,b){elem=$(b);this.responderList[a]=elem};ui.prototype.respond=function(b,a){elem=this.responderList[b];if(b!=null&&elem!=null&&a!=null){if(a.type=="update"){elem.html(a.content)}else{if(a.type=="append"){elem.append(a.content)}else{elem.html(a)}}}};ui.prototype.init=function(){var a=$(".uibutton");a.each(function(){if($(this).attr("uiaction")!=null){args=ui.args($(this).attr("uiaction"));action=args[0];uifn=args[1];id=$(this).attr("id");uiargs="";if(args.length>2){for(var b=2;b<args.length;b++){uiargs+=args[b]+" "}}new ui.action(id,action,uifn,uiargs)}})};ui.prototype.args=function(a){return a.split(" ")};ui.prototype.request=function(b,a){$.ajaxSetup({async:false});var c=null;$.post(b,a,function(d){c=d},"json");$.ajaxSetup({async:true});return c}}var ui=new ui;$(document).ready(function(){ui.init()});